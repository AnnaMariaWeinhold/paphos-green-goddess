---
import { useSanityClient } from 'astro-sanity';
import { urlForImage } from '../../lib/urlForImage';

const posts = await useSanityClient().fetch(`*[_type == "post"]{ 
    ..., 
    categories[]->
 }`);

import MainLayout from '../../layouts/MainLayout.astro';
import HeroShot from '../../components/HeroShot.astro';
import Spacer from '../../components/Spacer.astro';
import Section from '../../components/Section.astro';
import Footer from '../../components/Footer.astro';
---


<MainLayout
title="Blog by Paphos Green Goddess"
description="You are looking for an inspiring permaculture blog. Paphos green goddess offers knowledgable content that is straightforward and fun to read." 
>
<HeroShot 
img={{
    src:'/images/heroshot-blog.webp',
    alt:'A woman shows the worms to a child.'
}}
waveImg={{
	src:'/images/wave.svg',
	alt:'A wave as overlay for the background image'
}}
heading="We all have just one planet. Lets build a system that flourishes."
text="In this blog we will look at the principles of permaculture including obstacles, how to overcome those and in long-term plans that have the potential to yield in surprising ways. We will also look at what permaculture is not, and pick apart some of the greenwashing that has been slopped over the ‘business as usual’ paradigm to make it seem less destructive and more appealing."
/>
<Spacer />
<div class="bg-white">
    <Section>
        <div class="flex">
            {
              posts && (
                <ul>
                  {posts.map((post) => (
                    <div class="container">
                    <li>
                        <div class="blog-card__container">
                            <a href={`blog/${post.slug.current}`}>
                                <img class="blog-card__img" src={urlForImage(post.mainImage).url()}  alt={ post.alt }>
                            <div class="blog-card__meta">
                                <p class="date">{ new Date(post.publishedAt).toLocaleDateString("de-DE")}</p>
                                {Array.isArray(post.categories) && <p class="category">{ post.categories.map((category) => { 
                                    return <span>{ category.title || ''}</span>
                                }) }</p>}
                            </div>
                            <h3 class="blog-card__heading">{ post.title }</h3>
                            <p class="blog-card__description">{ post.description }</p>
                            <a class="blog-card__link" href={`blog/${post.slug.current}`}>Read more</a>
                            </a>
                        </div>
                    </li>
                  </div>
                  ))}
                </ul>
              )
            }
          </div>
    </Section>
</div>
<Footer 
	facebook="https://www.facebook.com/sharer/sharer.php?u=https://paphosgreengoddess.com/blog/"
	instagram="https://twitter.com/share?url=https://paphosgreengoddess.com/blog/"
	linkedIn="https://www.linkedin.com/shareArticle?mini=true&url=https://paphosgreengoddess.com/blog/"
/>
</MainLayout>

<style>
    ul {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 3em;
    }

    li {
        list-style: none;
    }

    a {
        text-decoration: none;
        color: var(--text-color);
    }

    .blog-card__container {
        padding: 24px;
    }    

    .blog-card__container:hover {
        pointer: cursor;
    }

    .blog-card__img {
        margin-bottom: 12px;  
        border-radius: var(--border-radius-img);
    }

    .blog-card__meta {
        display: flex;
        gap: 1em;
    }

    .category {
        text-transform: uppercase;
		font-size: var(--fs-xs);
        color: var(--main-color);  
		font-weight: 500; 
    }

    .date {
        font-size: var(--fs-xs);
    }

    .blog-card__heading {
        line-height: 1.2;
        margin-bottom: 12px;
    }

    .blog-card__description {
        margin-bottom: 2em;
    }

    .blog-card__link {
        background-color: var(--main-color);
        padding: 12px 16px;
        color: #fff;
        border-radius: var(--border-radius);
        text-decoration: none;
        font-size: var(--fs-xs);
        font-weight: 400;
        transition: 0.7s;
    }

    .blog-card__link:hover {
        box-shadow: inset 0 -4.25em 0 0 var(--hover-color);
    }
</style>